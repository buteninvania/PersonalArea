{"ast":null,"code":"import { authAPI } from \"../API/auth-api\";\nimport { stopSubmit } from \"redux-form\";\nconst initialState = {\n  login: \"\",\n  isAuth: false\n};\n\nconst authReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case \"FrontEnd/practice/SET-USER-DATA\":\n      return { ...state,\n        ...action.payload\n      };\n\n    default:\n      return state;\n  }\n};\n\nconst actions = {\n  setAuthUserData: (login, isAuth) => ({\n    type: \"FrontEnd/practice/SET-USER-DATA\",\n    payload: {\n      login,\n      isAuth\n    }\n  })\n};\nexport const getAuthUserData = () => async dispatch => {\n  const data = await authAPI.checkAuth();\n\n  if (data.resultCode === 1) {\n    const {\n      login\n    } = data;\n    dispatch(actions.setAuthUserData(login, true));\n  }\n};\nexport const login = (login, password) => async dispatch => {\n  const loginData = await authAPI.login(login, password);\n\n  if (loginData.resultCode === 1) {\n    dispatch(getAuthUserData());\n  } else {\n    const message = \"error\";\n    dispatch(stopSubmit(\"login\", {\n      _error: message\n    }));\n  }\n};\nexport default authReducer;","map":{"version":3,"sources":["/home/butenin/dev/PracticeFrontend/Frontend/src/Redux/auth-reducer.js"],"names":["authAPI","stopSubmit","initialState","login","isAuth","authReducer","state","action","type","payload","actions","setAuthUserData","getAuthUserData","dispatch","data","checkAuth","resultCode","password","loginData","message","_error"],"mappings":"AAAA,SAAQA,OAAR,QAAsB,iBAAtB;AACA,SAAQC,UAAR,QAAyB,YAAzB;AAEA,MAAMC,YAAY,GAAG;AACjBC,EAAAA,KAAK,EAAE,EADU;AAEjBC,EAAAA,MAAM,EAAE;AAFS,CAArB;;AAKA,MAAMC,WAAW,GAAG,CAACC,KAAK,GAAGJ,YAAT,EAAuBK,MAAvB,KAAkC;AAClD,UAAQA,MAAM,CAACC,IAAf;AACI,SAAK,iCAAL;AACI,aAAO,EACH,GAAGF,KADA;AAEH,WAAGC,MAAM,CAACE;AAFP,OAAP;;AAIJ;AACI,aAAOH,KAAP;AAPR;AASH,CAVD;;AAYA,MAAMI,OAAO,GAAG;AACZC,EAAAA,eAAe,EAAE,CAACR,KAAD,EAAQC,MAAR,MAAoB;AACjCI,IAAAA,IAAI,EAAC,iCAD4B;AAEjCC,IAAAA,OAAO,EAAE;AAACN,MAAAA,KAAD;AAAQC,MAAAA;AAAR;AAFwB,GAApB;AADL,CAAhB;AAOA,OAAO,MAAMQ,eAAe,GAAG,MAAM,MAAOC,QAAP,IAAoB;AACrD,QAAMC,IAAI,GAAG,MAAMd,OAAO,CAACe,SAAR,EAAnB;;AACA,MAAID,IAAI,CAACE,UAAL,KAAoB,CAAxB,EAA2B;AACvB,UAAM;AAACb,MAAAA;AAAD,QAAUW,IAAhB;AACAD,IAAAA,QAAQ,CAACH,OAAO,CAACC,eAAR,CAAwBR,KAAxB,EAA+B,IAA/B,CAAD,CAAR;AACH;AACJ,CANM;AAOP,OAAO,MAAMA,KAAK,GAAG,CAACA,KAAD,EAAQc,QAAR,KAAqB,MAAOJ,QAAP,IAAoB;AAC1D,QAAMK,SAAS,GAAG,MAAMlB,OAAO,CAACG,KAAR,CAAcA,KAAd,EAAqBc,QAArB,CAAxB;;AACA,MAAIC,SAAS,CAACF,UAAV,KAAyB,CAA7B,EAAgC;AAC5BH,IAAAA,QAAQ,CAACD,eAAe,EAAhB,CAAR;AACH,GAFD,MAEO;AACH,UAAMO,OAAO,GAAG,OAAhB;AACAN,IAAAA,QAAQ,CAACZ,UAAU,CAAC,OAAD,EAAU;AAACmB,MAAAA,MAAM,EAAED;AAAT,KAAV,CAAX,CAAR;AACH;AACJ,CARM;AASP,eAAed,WAAf","sourcesContent":["import {authAPI} from \"../API/auth-api\";\nimport {stopSubmit} from \"redux-form\";\n\nconst initialState = {\n    login: \"\",\n    isAuth: false\n}\n\nconst authReducer = (state = initialState, action) => {\n    switch (action.type) {\n        case \"FrontEnd/practice/SET-USER-DATA\":\n            return {\n                ...state,\n                ...action.payload\n            }\n        default:\n            return state\n    }\n}\n\nconst actions = {\n    setAuthUserData: (login, isAuth) => ({\n        type:\"FrontEnd/practice/SET-USER-DATA\",\n        payload: {login, isAuth}\n    })\n}\n\nexport const getAuthUserData = () => async (dispatch) => {\n    const data = await authAPI.checkAuth()\n    if (data.resultCode === 1) {\n        const {login} = data\n        dispatch(actions.setAuthUserData(login, true))\n    }\n}\nexport const login = (login, password) => async (dispatch) => {\n    const loginData = await authAPI.login(login, password)\n    if (loginData.resultCode === 1) {\n        dispatch(getAuthUserData())\n    } else {\n        const message = \"error\"\n        dispatch(stopSubmit(\"login\", {_error: message}))\n    }\n}\nexport default authReducer"]},"metadata":{},"sourceType":"module"}